{"remainingRequest":"/home/joost/workflow/MoscowMap/node_modules/thread-loader/dist/cjs.js!/home/joost/workflow/MoscowMap/node_modules/babel-loader/lib/index.js!/home/joost/workflow/MoscowMap/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/joost/workflow/MoscowMap/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/joost/workflow/MoscowMap/src/components/MapMoscow.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/joost/workflow/MoscowMap/src/components/MapMoscow.vue","mtime":1600090883088},{"path":"/home/joost/workflow/MoscowMap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/joost/workflow/MoscowMap/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/joost/workflow/MoscowMap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/joost/workflow/MoscowMap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/joost/workflow/MoscowMap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5tYXAiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIudG8tZml4ZWQiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IiOwppbXBvcnQgX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIgZnJvbSAiL2hvbWUvam9vc3Qvd29ya2Zsb3cvTW9zY293TWFwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL2hvbWUvam9vc3Qvd29ya2Zsb3cvTW9zY293TWFwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0ICogYXMgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgUmVnaW9uIGZyb20gIkAvbW9kZWxzL3JlZ2lvbiI7CmltcG9ydCAqIGFzIGFtNGNvcmUgZnJvbSAiQGFtY2hhcnRzL2FtY2hhcnRzNC9jb3JlIjsKaW1wb3J0ICogYXMgYW00Y2hhcnRzIGZyb20gIkBhbWNoYXJ0cy9hbWNoYXJ0czQvY2hhcnRzIjsKaW1wb3J0IGFtNHRoZW1lc19hbmltYXRlZCBmcm9tICJAYW1jaGFydHMvYW1jaGFydHM0L3RoZW1lcy9hbmltYXRlZCI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnTWFwTW9zY293JywKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbWFwOiBudWxsLAogICAgICByZWdpb25zSnNvbjogbnVsbCwKICAgICAgcmVnaW9uczogW10sCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBjaGFydERhdGE6IFtdLAogICAgICBhY3RpdmVTbGljZU5hbWU6IG51bGwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICB5YW5kZXhNYXBzSW5pdGlhbGl6YXRpb246IGZ1bmN0aW9uIHlhbmRleE1hcHNJbml0aWFsaXphdGlvbigpIHsKICAgICAgdGhpcy5tYXAgPSBuZXcgeW1hcHMuTWFwKCdtYXAnLCB7CiAgICAgICAgY2VudGVyOiBbMzcuNjQsIDU1Ljc2XSwKICAgICAgICB6b29tOiAxMAogICAgICB9KTsKICAgICAgdGhpcy5tYXAubGF5ZXJzLmFkZChuZXcgeW1hcHMuTGF5ZXIoJ2h0dHA6Ly90aWxlLm9wZW5zdHJlZXRtYXAub3JnLyV6LyV4LyV5LnBuZycsIHsKICAgICAgICBwcm9qZWN0aW9uOiB5bWFwcy5wcm9qZWN0aW9uLnNwaGVyaWNhbE1lcmNhdG9yCiAgICAgIH0pKTsKICAgICAgdGhpcy5tYXAuY29weXJpZ2h0cy5hZGQoJyZjb3B5OyBPcGVuU3RyZWV0TWFwIGNvbnRyaWJ1dG9ycywgQ0MtQlktU0EnKTsKICAgIH0sCiAgICBnZXRSZWdpb25zSnNvbjogZnVuY3Rpb24gZ2V0UmVnaW9uc0pzb24oKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciByZWdpb25zSnNvbjsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5nZXQoJ2h0dHBzOi8vYXBpLmpzb25iaW4uaW8vYi81ZjVjMDg3MGFkMjNiNTdlZjkxMDcxNTcvOCcsIHsKICAgICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICdzZWNyZXQta2V5JzogJyQyYiQxMCRmODBmWHgwMzFvZGRBRHNBUE90TGJPZmFJTnZXaVE4VEllSHJLLmRsNFFuRTZDVEt5RktnRycKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHJlZ2lvbnNKc29uID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIF90aGlzLnJlZ2lvbnNKc29uID0gcmVnaW9uc0pzb24uZGF0YTsKCiAgICAgICAgICAgICAgICBfdGhpcy5HZW9Kc29uSGFuZGxlcigpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgR2VvSnNvbkhhbmRsZXI6IGZ1bmN0aW9uIEdlb0pzb25IYW5kbGVyKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMucmVnaW9uc0pzb24uZmVhdHVyZXMuZm9yRWFjaChmdW5jdGlvbiAocmVnaW9uKSB7CiAgICAgICAgaWYgKHJlZ2lvbi5nZW9tZXRyeS50eXBlID09PSAiUG9seWdvbiIpIHsKICAgICAgICAgIHZhciByZWcgPSBuZXcgUmVnaW9uKHJlZ2lvbiwgX3RoaXMyLm1hcCk7CgogICAgICAgICAgX3RoaXMyLnJlZ2lvbnMucHVzaChyZWcpOwoKICAgICAgICAgIHJlZy5kaXNwbGF5KCk7CiAgICAgICAgfSBlbHNlIGlmIChyZWdpb24uZ2VvbWV0cnkudHlwZSA9PT0gIk11bHRpUG9seWdvbiIpIHsKICAgICAgICAgIHJlZ2lvbi5nZW9tZXRyeS5jb29yZGluYXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChjb29yZHMpIHsKICAgICAgICAgICAgcmV0dXJuIF90aGlzMi5hZGRNdWx0aVBvbHlnb25QYXJ0VG9NYXAoY29vcmRzLCByZWdpb24pOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy5nZW5lcmF0ZVJhbmRvbVBvaW50cygxMDApOwogICAgfSwKICAgIGFkZE11bHRpUG9seWdvblBhcnRUb01hcDogZnVuY3Rpb24gYWRkTXVsdGlQb2x5Z29uUGFydFRvTWFwKGNvb3JkcywgcmVnaW9uKSB7CiAgICAgIHZhciByZWcgPSBuZXcgUmVnaW9uKHJlZ2lvbiwgdGhpcy5tYXAsIHsKICAgICAgICAndHlwZSc6ICdQb2x5Z29uJywKICAgICAgICAnY29vcmRpbmF0ZXMnOiBjb29yZHMKICAgICAgfSk7CiAgICAgIHRoaXMucmVnaW9ucy5wdXNoKHJlZyk7CiAgICAgIHJlZy5kaXNwbGF5KCk7CiAgICB9LAogICAgY2xlYXJBbGxQb2ludHM6IGZ1bmN0aW9uIGNsZWFyQWxsUG9pbnRzKCkgewogICAgICB0aGlzLnJlZ2lvbnMuZm9yRWFjaChmdW5jdGlvbiAocmVnaW9uKSB7CiAgICAgICAgcmVnaW9uLmlzQWN0aXZlID0gZmFsc2U7CiAgICAgICAgcmVnaW9uLmNsZWFyUG9pbnRzKCk7CiAgICAgIH0pOwogICAgfSwKICAgIGdlbmVyYXRlUmFuZG9tUG9pbnRzOiBmdW5jdGlvbiBnZW5lcmF0ZVJhbmRvbVBvaW50cyh2YWx1ZSkgewogICAgICB0aGlzLmNsZWFyQWxsUG9pbnRzKCk7CiAgICAgIHZhciBpID0gMDsKICAgICAgdmFyIGdyb3Nzd2VpZ2h0ID0gMDsKICAgICAgdGhpcy5yZWdpb25zLmZvckVhY2goZnVuY3Rpb24gKHJlZ2lvbikgewogICAgICAgIHJlZ2lvbi5kaXNwbGF5KCk7CiAgICAgICAgcmVnaW9uLnJhbmdlRnJvbSA9IGdyb3Nzd2VpZ2h0LnRvRml4ZWQoNSk7CiAgICAgICAgZ3Jvc3N3ZWlnaHQgKz0gcGFyc2VGbG9hdChyZWdpb24ud2VpZ2h0KTsKICAgICAgICByZWdpb24ucmFuZ2VUbyA9IGdyb3Nzd2VpZ2h0LnRvRml4ZWQoNSk7CiAgICAgIH0pOwoKICAgICAgd2hpbGUgKGkgPCB2YWx1ZSkgewogICAgICAgIHZhciByYW5kb21WYWx1ZSA9IE1hdGgucmFuZG9tKCkgKiBncm9zc3dlaWdodDsKICAgICAgICB0aGlzLnJlZ2lvbnMuZm9yRWFjaChmdW5jdGlvbiAocmVnaW9uKSB7CiAgICAgICAgICBpZiAocmFuZG9tVmFsdWUgPD0gcmVnaW9uLnJhbmdlVG8gJiYgcmFuZG9tVmFsdWUgPj0gcmVnaW9uLnJhbmdlRnJvbSkgewogICAgICAgICAgICByZWdpb24uZ2VuZXJhdGVSYW5kb21Qb2ludCgpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgICsraTsKICAgICAgfQoKICAgICAgdGhpcy5nZW5lcmF0ZUNoYXJ0RGF0YSgpOwogICAgfSwKICAgIGdlbmVyYXRlQ2hhcnREYXRhOiBmdW5jdGlvbiBnZW5lcmF0ZUNoYXJ0RGF0YSgpIHsKICAgICAgdmFyIGNoYXJ0RGF0YSA9IFtdOwogICAgICB2YXIgY29tYmluZWRSZWdpb25zID0gbmV3IE1hcCgpOwogICAgICB0aGlzLnJlZ2lvbnMuZm9yRWFjaChmdW5jdGlvbiAocmVnaW9uKSB7CiAgICAgICAgaWYgKGNvbWJpbmVkUmVnaW9ucy5oYXMocmVnaW9uLm5hbWUpKSB7CiAgICAgICAgICB2YXIgdmFsdWUgPSBjb21iaW5lZFJlZ2lvbnMuZ2V0KHJlZ2lvbi5uYW1lKTsKICAgICAgICAgIHZhbHVlLnBvaW50cyArPSByZWdpb24ucG9pbnRzLmxlbmd0aDsKICAgICAgICAgIGNvbWJpbmVkUmVnaW9ucy5zZXQocmVnaW9uLm5hbWUsIHZhbHVlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29tYmluZWRSZWdpb25zLnNldChyZWdpb24ubmFtZSwgewogICAgICAgICAgICByZWdpb246IHJlZ2lvbi5uYW1lLAogICAgICAgICAgICBwb2ludHM6IHJlZ2lvbi5wb2ludHMubGVuZ3RoLAogICAgICAgICAgICBjb2xvcjogcmVnaW9uLmNvbG9yCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGNvbWJpbmVkUmVnaW9ucy52YWx1ZXMoKSksCiAgICAgICAgICBfc3RlcDsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciB2YWx1ZSA9IF9zdGVwLnZhbHVlOwogICAgICAgICAgY2hhcnREYXRhLnB1c2godmFsdWUpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yLmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IuZigpOwogICAgICB9CgogICAgICB0aGlzLmNoYXJ0RGF0YSA9IGNoYXJ0RGF0YTsKICAgICAgdGhpcy5jaGFydEhhbmRsZXIoKTsKICAgIH0sCiAgICBjaGFydEhhbmRsZXI6IGZ1bmN0aW9uIGNoYXJ0SGFuZGxlcigpIHsKICAgICAgdmFyIGNoYXJ0ID0gYW00Y29yZS5jcmVhdGUodGhpcy4kcmVmcy5jaGFydGRpdiwgYW00Y2hhcnRzLlBpZUNoYXJ0KTsKICAgICAgY2hhcnQuaGlkZGVuU3RhdGUucHJvcGVydGllcy5vcGFjaXR5ID0gMDsKICAgICAgY2hhcnQuZGF0YSA9IHRoaXMuY2hhcnREYXRhOwogICAgICBjaGFydC5pbm5lclJhZGl1cyA9IGFtNGNvcmUucGVyY2VudCg0MCk7CiAgICAgIGNoYXJ0LmRlcHRoID0gMTIwOwogICAgICBjaGFydC5sZWdlbmQgPSBuZXcgYW00Y2hhcnRzLkxlZ2VuZCgpOwogICAgICB2YXIgc2VyaWVzID0gY2hhcnQuc2VyaWVzLnB1c2gobmV3IGFtNGNoYXJ0cy5QaWVTZXJpZXMoKSk7CiAgICAgIHNlcmllcy5kYXRhRmllbGRzLnZhbHVlID0gInBvaW50cyI7CiAgICAgIHNlcmllcy5kYXRhRmllbGRzLmRlcHRoVmFsdWUgPSAicG9pbnRzIjsKICAgICAgc2VyaWVzLmRhdGFGaWVsZHMuY2F0ZWdvcnkgPSAicmVnaW9uIjsKICAgICAgc2VyaWVzLnNsaWNlcy50ZW1wbGF0ZS5jb3JuZXJSYWRpdXMgPSAzOwogICAgICBzZXJpZXMuY29sb3JzLnN0ZXAgPSAzOwogICAgICBzZXJpZXMuc2xpY2VzLnRlbXBsYXRlLmV2ZW50cy5vbigiaGl0IiwgdGhpcy5zbGljZUNsaWNrSGFuZGxlcik7CiAgICB9LAogICAgc2xpY2VDbGlja0hhbmRsZXI6IGZ1bmN0aW9uIHNsaWNlQ2xpY2tIYW5kbGVyKGV2ZW50KSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdmFyIHNsaWNlTmFtZSA9IGV2ZW50LnRhcmdldC5zbGljZS5kYXRhSXRlbS5fZGF0YUNvbnRleHQucmVnaW9uOwogICAgICB2YXIgYWN0aXZlQ291bnRlciA9IDA7CiAgICAgIHRoaXMucmVnaW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChyZWdpb24pIHsKICAgICAgICBpZiAocmVnaW9uLm5hbWUgIT09IHNsaWNlTmFtZSAmJiAhcmVnaW9uLmlzQWN0aXZlIHx8IHJlZ2lvbi5uYW1lID09PSBzbGljZU5hbWUgJiYgcmVnaW9uLmlzQWN0aXZlKSB7CiAgICAgICAgICByZWdpb24uaXNBY3RpdmUgPSBmYWxzZTsKICAgICAgICAgIHJlZ2lvbi5oaWRlKCk7CiAgICAgICAgICByZWdpb24ucG9pbnRzLmZvckVhY2goZnVuY3Rpb24gKHBvaW50KSB7CiAgICAgICAgICAgIHBvaW50LmhpZGUoKTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSBpZiAocmVnaW9uLm5hbWUgPT09IHNsaWNlTmFtZSAmJiAhcmVnaW9uLmlzQWN0aXZlKSB7CiAgICAgICAgICBfdGhpczMuYWN0aXZlU2xpY2VOYW1lID0gc2xpY2VOYW1lOwogICAgICAgICAgcmVnaW9uLmlzQWN0aXZlID0gdHJ1ZTsKICAgICAgICAgIHJlZ2lvbi5kaXNwbGF5KCk7CiAgICAgICAgICByZWdpb24ucG9pbnRzLmZvckVhY2goZnVuY3Rpb24gKHBvaW50KSB7CiAgICAgICAgICAgIHBvaW50LmRpc3BsYXkoKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgaWYgKHJlZ2lvbi5pc0FjdGl2ZSkgewogICAgICAgICAgYWN0aXZlQ291bnRlcisrOwogICAgICAgIH0KICAgICAgfSk7CgogICAgICBpZiAoYWN0aXZlQ291bnRlciA9PT0gMCkgewogICAgICAgIHRoaXMucmVnaW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChyZWdpb24pIHsKICAgICAgICAgIHJlZ2lvbi5kaXNwbGF5KCk7CiAgICAgICAgICByZWdpb24ucG9pbnRzLmZvckVhY2goZnVuY3Rpb24gKHBvaW50KSB7CiAgICAgICAgICAgIHBvaW50LmRpc3BsYXkoKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiBfdGhpczQuZ2V0UmVnaW9uc0pzb24oKTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUyKTsKICAgIH0pKSgpOwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4geW1hcHMucmVhZHkoX3RoaXM1LnlhbmRleE1hcHNJbml0aWFsaXphdGlvbik7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMyk7CiAgICB9KSkoKTsKICB9LAogIGJlZm9yZURlc3Ryb3k6IGZ1bmN0aW9uIGJlZm9yZURlc3Ryb3koKSB7CiAgICBpZiAodGhpcy5jaGFydCkgewogICAgICB0aGlzLmNoYXJ0LmRpc3Bvc2UoKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["MapMoscow.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"moscow-map\">\n    <div class=\"moscow-map__chart\" ref=\"chartdiv\"></div>\n    <v-btn class=\"moscow-map__refresh_button\" @click=\"generateRandomPoints(100)\">Сгенерировать</v-btn>\n    <div id=\"map\" class=\"moscow-map__map\"></div>\n  </div>\n</template>\n\n<script>\nimport * as axios from 'axios'\nimport Region from \"@/models/region\";\nimport * as am4core from \"@amcharts/amcharts4/core\";\nimport * as am4charts from \"@amcharts/amcharts4/charts\";\nimport am4themes_animated from \"@amcharts/amcharts4/themes/animated\";\n\n\nexport default {\n  name: 'MapMoscow',\n  data: () => ({\n    map: null,\n    regionsJson: null,\n    regions: [],\n    loading: false,\n    chartData: [],\n    activeSliceName: null\n  }),\n  methods: {\n    yandexMapsInitialization () {\n     this.map = new ymaps.Map('map', {\n        center: [ 37.64, 55.76],\n        zoom: 10\n      })\n      this.map.layers.add(new ymaps.Layer('http://tile.openstreetmap.org/%z/%x/%y.png', {\n          projection: ymaps.projection.sphericalMercator\n      }));\n     this.map.copyrights.add('&copy; OpenStreetMap contributors, CC-BY-SA');\n    },\n    async getRegionsJson () {\n      const regionsJson = await axios.get('https://api.jsonbin.io/b/5f5c0870ad23b57ef9107157/8',\n        { headers: { 'secret-key': '$2b$10$f80fXx031oddADsAPOtLbOfaINvWiQ8TIeHrK.dl4QnE6CTKyFKgG' } }\n      )\n      this.regionsJson = regionsJson.data\n      this.GeoJsonHandler()\n    },\n    GeoJsonHandler () {\n      this.regionsJson.features.forEach(region => {\n        if (region.geometry.type === \"Polygon\") {\n          var reg = new Region(region, this.map)\n          this.regions.push(reg)\n          reg.display()\n        } else if (region.geometry.type === \"MultiPolygon\") {\n          region.geometry.coordinates.forEach(coords => this.addMultiPolygonPartToMap(coords, region));\n        }\n      })\n      this.generateRandomPoints(100)\n    },\n    addMultiPolygonPartToMap (coords, region) {\n      var reg = new Region(region, this.map, { 'type': 'Polygon', 'coordinates': coords })\n      this.regions.push(reg)\n      reg.display()\n    },\n    clearAllPoints () {\n      this.regions.forEach(region => {\n        region.isActive = false\n        region.clearPoints()\n      })\n    },\n    generateRandomPoints(value) {\n      this.clearAllPoints()\n      var i = 0\n      var grossweight = 0\n      this.regions.forEach(region => {\n        region.display()\n        region.rangeFrom = grossweight.toFixed(5)\n        grossweight += parseFloat(region.weight)\n        region.rangeTo = grossweight.toFixed(5)\n      })\n      while (i < value) {\n        var randomValue = (Math.random() * grossweight)\n        this.regions.forEach(region => {\n          if (randomValue <= region.rangeTo && randomValue >= region.rangeFrom) {\n            region.generateRandomPoint()\n          }\n        })\n\n        ++i\n      }\n      this.generateChartData()\n    },\n    generateChartData () {\n      var chartData = []\n      var combinedRegions = new Map\n      this.regions.forEach(region => {\n        if (combinedRegions.has(region.name)) {\n          var value = combinedRegions.get(region.name)\n          value.points += region.points.length\n          combinedRegions.set(region.name, value)\n        } else {\n          combinedRegions.set(region.name, { region: region.name, points: region.points.length, color: region.color })\n        }\n      })\n      for (let value of combinedRegions.values()) {\n        chartData.push(value)\n      }\n      this.chartData = chartData\n      this.chartHandler()\n    },\n    chartHandler () {\n      var chart = am4core.create(this.$refs.chartdiv, am4charts.PieChart);\n      chart.hiddenState.properties.opacity = 0;\n      chart.data = this.chartData\n      chart.innerRadius = am4core.percent(40);\n      chart.depth = 120;\n      chart.legend = new am4charts.Legend();\n      var series = chart.series.push(new am4charts.PieSeries());\n      series.dataFields.value = \"points\";\n      series.dataFields.depthValue = \"points\";\n      series.dataFields.category = \"region\";\n      series.slices.template.cornerRadius = 3;\n      series.colors.step = 3;\n      series.slices.template.events.on(\"hit\", this.sliceClickHandler)\n    },\n    sliceClickHandler (event) {\n      var sliceName = event.target.slice.dataItem._dataContext.region\n      var activeCounter = 0\n      this.regions.forEach(region => {\n        if ((region.name !== sliceName && !region.isActive) || (region.name === sliceName && region.isActive)) {\n          region.isActive = false\n          region.hide()\n          region.points.forEach(point => {\n            point.hide()\n          })\n        } else if (region.name === sliceName && !region.isActive) {\n          this.activeSliceName = sliceName\n          region.isActive = true\n          region.display()\n          region.points.forEach(point => {\n            point.display()\n          })\n        }\n        if (region.isActive) {\n          activeCounter++\n        }\n      })\n      if (activeCounter === 0) {\n        this.regions.forEach(region => {\n          region.display()\n          region.points.forEach(point => {\n            point.display()\n          })\n        })\n      }\n    }\n  },\n  async created () {\n    await this.getRegionsJson()\n  },\n  async mounted () {\n    await ymaps.ready(this.yandexMapsInitialization)\n  },\n  beforeDestroy() {\n    if (this.chart) {\n      this.chart.dispose();\n    }\n  }\n}\n</script>\n<style scoped>\n.moscow-map {\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n  width: 100%;\n}\n.moscow-map__chart {\n  width: 100%;\n  height: 40%;\n  font-size: 12px;\n}\n.moscow-map__map {\n  width: 100%;\n  height: 60%;\n}\n</style>\n"],"sourceRoot":"src/components"}]}